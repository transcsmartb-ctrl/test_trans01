
{
  "openapi": "3.0.3",
  "info": {
    "title": "Digitalised Tracking System API",
    "description": "API for submitting digitalised-tracking-system software data",
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://your-domain.com/api/v1"
    }
  ],
  "paths": {
    "/software": {
      "post": {
        "summary": "Submit digitalised tracking system data",
        "description": "POST an array of digitalised-tracking-system objects",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "array",
                "items": {
                  "$ref": "#/components/schemas/DigitalisedTrackingSystem"
                }
              },
              "example": [
                {
                  "category4S": "digitalised-tracking-system",
                  "siteId": "1693279120646",
                  "supplierId": "438",
                  "plantToolProperties": {
                    "machineId": "1504855704",
                    "machineType": 145,
                    "type": 1,
                    "deviceSn": "9125-0007",
                    "deviceStatus": 1,
                    "operators": "zhangsan,lisi",
                    "entryDate": "2025-05-16T00:00:00+08:00",
                    "departureDate": "2026-05-16T00:00:00+08:00",
                    "imageUrl": "https://xxxx.jpeg",
                    "model": "DGA402",
                    "safeLoad": "27.82T",
                    "brand": "Makita",
                    "voltage": 2,
                    "manufacturer": "test manufacturer",
                    "manufactureDate": "2025-04-08T00:00:00+08:00",
                    "certificateNumber": "c0001",
                    "certificateStartDate": "2025-10-08T00:00:00+08:00",
                    "certificateEndDate": "2026-10-08T00:00:00+08:00",
                    "certificateStatus": 0,
                    "checkStatus": 1,
                    "inspectorId": 4839480343,
                    "inspectorName": "kris",
                    "createTime": "2025-05-16T09:00:01+08:00",
                    "creator": "kris"
                  },
                  "additionalProperties": {
                    "cicSiteId": 4338493849,
                    "qrCode": "403483984",
                    "size": "10m",
                    "locationDesc": "The second floor 204",
                    "operationManual": "https://xxxx.pdf",
                    "remark": "251132VH4578"
                  }
                }
              ]
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "success"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DigitalisedTrackingSystem": {
        "type": "object",
        "required": [
          "category4S",
          "siteId",
          "supplierId",
          "plantToolProperties"
        ],
        "properties": {
          "category4S": {
            "type": "string",
            "enum": ["digitalised-tracking-system"],
            "description": "Category 4S Type code for the software"
          },
          "siteId": {
            "type": "string",
            "description": "A unique Site ID defined by solution vendor"
          },
          "supplierId": {
            "type": "string",
            "description": "Unique supplier ID"
          },
          "plantToolProperties": {
            "type": "object",
            "properties": {
              "deviceSn": {
                "type": "string",
                "description": "Serial number of the device"
              },
              "deviceStatus": {
                "type": "integer",
                "description": "Status of the device"
              },
              "machineId": {
                "type": "string",
                "description": "Machine ID (e.g., M001)"
              },
              "machineType": {
                "type": "integer",
                "description": "Type of machine (coded integer)"
              },
              "type": {
                "type": "integer",
                "description": "Specific equipment type (coded integer)"
              },
              "operators": {
                "type": "string",
                "description": "Comma-separated operator names"
              },
              "entryDate": {
                "type": "string",
                "format": "date-time",
                "description": "Device entry date and time"
              },
              "departureDate": {
                "type": "string",
                "format": "date-time",
                "description": "Device departure date and time"
              },
              "checkStatus": {
                "type": "integer",
                "enum": [0,1,2],
                "description": "0=Pending,1=Passed,2=Failed inspection"
              },
              "imageUrl": {
                "type": "string",
                "format": "uri",
                "description": "URL for tool image"
              },
              "model": {
                "type": "string",
                "description": "Device model"
              },
              "safeLoad": {
                "type": "string",
                "description": "Safe load limit"
              },
              "brand": {
                "type": "string",
                "description": "Device brand"
              },
              "voltage": {
                "type": "integer",
                "enum": [1,2,3,4],
                "description": "1=110V,2=220V,3=380V,4=Rechargeable"
              },
              "manufacturer": {
                "type": "string",
                "description": "Manufacturer name"
              },
              "manufactureDate": {
                "type": "string",
                "format": "date-time",
                "description": "Manufacture date"
              },
              "certificateNumber": {
                "type": "string",
                "description": "Certificate number"
              },
              "certificateStartDate": {
                "type": "string",
                "format": "date-time",
                "description": "Certificate start date"
              },
              "certificateEndDate": {
                "type": "string",
                "format": "date-time",
                "description": "Certificate end date"
              },
              "certificateStatus": {
                "type": "integer",
                "enum": [0,1,2,3,4,5],
                "description": "0=Normal,1=Expired,2-5=Expiration warnings"
              },
              "inspectorId": {
                "type": "integer",
                "description": "Inspector ID"
              },
              "inspectorName": {
                "type": "string",
                "description": "Inspector name"
              },
              "creator": {
                "type": "string",
                "description": "Record creator"
              },
              "createTime": {
                "type": "string",
                "format": "date-time",
                "description": "Record creation time"
              }
            },
            "required": [
              "deviceSn",
              "deviceStatus",
              "machineId",
              "machineType",
              "type",
              "operators",
              "entryDate",
              "departureDate",
              "checkStatus",
              "imageUrl",
              "model",
              "safeLoad",
              "brand",
              "voltage",
              "manufacturer",
              "manufactureDate",
              "certificateNumber",
              "certificateStartDate",
              "certificateEndDate",
              "certificateStatus",
              "inspectorId",
              "inspectorName",
              "creator",
              "createTime"
            ]
          },
          "additionalProperties": {
            "type": "object",
            "properties": {
              "cicSiteId": {
                "type": "integer",
                "minimum": 0
              },
              "qrCode": {
                "type": "string"
              },
              "size": {
                "type": "string"
              },
              "locationDesc": {
                "type": "string"
              },
              "operationManual": {
                "type": "string",
                "format": "uri"
              },
              "remark": {
                "type": "string"
              }
            }
          }
        }
      }
    }
  }
}
