json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "DeviceListOrUpsert",
  "description": "Base schema for 4S IoT device records used by Device-001/002/004 (section 5.1.1â€“5.1.4 and Appendix B IoT Device Field Table). [file:1]",
  "type": "object",
  "properties": {
    "category4S": {
      "type": "string",
      "description": "Category 4S Type code for the device (Appendix A). [file:1]",
      "example": "smart-monitoring-device"
    },
    "siteId": {
      "type": "string",
      "description": "Unique Site ID defined by solution vendor. [file:1]",
      "example": "1693279120646"
    },
    "supplierId": {
      "type": "string",
      "description": "Unique ID indicating the device supplier. [file:1]",
      "example": "438"
    },
    "pushAt": {
      "type": "string",
      "format": "date-time",
      "description": "Data push time in ISO 8601 format. [file:1]",
      "example": "2025-01-06T14:40:16+08:00"
    },
    "deviceProperties": {
      "type": "object",
      "description": "Common device properties; extended per category in category-specific schemas (devices/category4s/*.schema.json). [file:1]",
      "properties": {
        "deviceSn": {
          "type": "string",
          "description": "Serial number of the device by solution vendor. [file:1]",
          "example": "SN-8655078237"
        },
        "deviceName": {
          "type": "string",
          "description": "Name of the device. [file:1]",
          "example": "watch 001"
        }
      },
      "required": ["deviceSn"]
    },
    "worker": {
      "type": "object",
      "description": "Worker info for wearable devices such as smart-monitoring-device. [file:1]",
      "properties": {
        "workerId": {
          "type": "string",
          "description": "ID of the worker. [file:1]",
          "example": "30054722"
        },
        "workerName": {
          "type": "string",
          "description": "Name of the worker. [file:1]",
          "example": "tom"
        },
        "phone": {
          "type": "string",
          "description": "Worker contact number. [file:1]",
          "example": "65460363"
        }
      }
    },
    "machineProperties": {
      "type": "object",
      "description": "Machine info for categories like tower-crane and mobile-plant-operation. [file:1]",
      "properties": {
        "machineId": {
          "type": "string",
          "description": "Unique machine ID. [file:1]",
          "example": "M123"
        },
        "machineType": {
          "type": "string",
          "description": "Type of crane, plant, or AI monitoring system. [file:1]",
          "example": "Hammerhead Tower Crane"
        }
      }
    },
    "additionalProperties": {
      "type": "object",
      "description": "Optional, category-specific device extensions. [file:1]",
      "properties": {
        "cicSiteId": {
          "type": "integer",
          "description": "CIC site ID for cross-platform exchange. [file:1]",
          "example": 438493849
        },
        "remark": {
          "type": "string",
          "description": "Additional notes about the device. [file:1]",
          "example": "this is a smart watch"
        },
        "streamUrl": {
          "type": "string",
          "description": "Live streaming URL (flv/rtsp/rtmp/hls) for machine devices. [file:1]",
          "example": "https://xxxx.flv"
        },
        "locationDesc": {
          "type": "string",
          "description": "Description of device location. [file:1]",
          "example": "East side of site"
        }
      },
      "additionalProperties": true
    }
  },
  "required": ["category4S", "siteId", "supplierId", "deviceProperties"]
}
