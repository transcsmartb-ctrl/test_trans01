{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AlertItem",
  "description": "Base schema for alert payloads from Alert-001/002/004 APIs in CIC SSSS Framework (see sections 6.2.1-6.2.4 and Appendix E) [file:1]",
  "type": "object",
  "properties": {
    "category4S": {
      "type": "string",
      "description": "4S Category code (Appendix A) [file:1]",
      "example": "smart-monitoring-device"
    },
    "siteId": {
      "type": "string",
      "description": "Unique Site ID [file:1]",
      "example": "1693279120646"
    },
    "supplierId": {
      "type": "string",
      "description": "Supplier ID [file:1]",
      "example": "438"
    },
    "deviceSn": {
      "type": "string",
      "description": "Device serial number [file:1]",
      "example": "868655077658237"
    },
    "pushAt": {
      "type": "string",
      "format": "date-time",
      "description": "Push time ISO 8601 [file:1]",
      "example": "2025-01-06T14:40:16+08:00"
    },
    "alertProperties": {
      "type": "object",
      "properties": {
        "alertId": {
          "type": "string",
          "description": "Unique alert ID [file:1]",
          "example": "30284930284"
        },
        "alertType": {
          "type": "string",
          "description": "Alert type code (category-specific, Appendix H) [file:1]",
          "example": "abnormal-body-temperature"
        },
        "alertLevel": {
          "type": "integer",
          "description": "0-Notification, 1-Warning, 2-Critical [file:1]",
          "example": 0
        },
        "alertStatus": {
          "type": "integer",
          "description": "0-Unprocessed,1-Processing,2-Processed,3-False Alarm,4-Cleared,5-Deferred,6-Addressed,7-Cancelled [file:1]",
          "example": 0
        },
        "alertMessage": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "Multilingual message (BCP 47 keys: en-HK, zh-HK, zh-CN) [file:1]",
          "example": {
            "en-HK": "Abnormal body temperature",
            "zh-HK": "...",
            "zh-CN": "..."
          }
        },
        "alertTime": {
          "type": "string",
          "format": "date-time",
          "description": "Alert occurrence time [file:1]",
          "example": "2025-01-06T14:40:16+08:00"
        },
        "alertNum": {
          "type": "number",
          "description": "Alert value/threshold [file:1]",
          "example": 40
        }
      },
      "required": ["alertId"]
    },
    "additionalProperties": {
      "type": "object",
      "description": "Category-specific extensions (e.g., imageUrl, notifyRecipient, triggerPersonnel) [file:1]",
      "properties": {
        "cicSiteId": {
          "type": "integer",
          "example": 594958493849
        },
        "imageUrl": {
          "type": "string",
          "example": "https://xxxx.jpeg"
        },
        "notifyRecipient": {
          "type": "object",
          "properties": {
            "name": {"type": "string"},
            "phone": {"type": "string"}
          }
        },
        "triggerPersonnel": {
          "type": "object",
          "properties": {
            "id": {"type": "string"},
            "name": {"type": "string"}
          }
        }
      }
    }
  },
  "required": ["category4S", "siteId", "alertProperties"]
}
